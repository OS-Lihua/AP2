# 核心概念

智能体支付协议 (AP2) 建立在核心原则和基于角色的架构基础之上，旨在创建安全、可互操作且公平的生态系统。

## 指导原则

- **开放性和互操作性**: AP2 是智能体间协议的开放、非专有扩展，促进竞争环境，使任何符合标准的智能体都能与任何符合标准的商户协作。
- **用户控制和隐私**: 用户始终是最终权威。协议的核心设计考虑隐私保护，使用基于角色的架构和加密技术来保护敏感的用户数据和支付详情。
- **可验证意图，而非推断行为**: 信任基于用户确定性的、不可否认的意图证明，直接解决智能体错误或"幻觉"的风险。
- **清晰的交易责任归属**: 为了让支付生态系统接受智能体支付，交易责任归属不能存在任何模糊性。协议提供支持证据，帮助支付网络建立清晰、公平的责任归属和争议解决原则。通过为每笔交易创建不可否认的加密审计跟踪，该框架提供了自信解决争议所需的证据。

## 基于角色的架构

协议通过为生态系统中的每个参与者分配不同角色来定义清晰的关注点分离：

- **用户 (User)**: 将支付任务委托给智能体的个人。
- **用户智能体 (UA) / 购物智能体 (SA)**: 用户交互的 AI 界面（如 Gemini、ChatGPT）。它理解用户需求，构建购物车，并获得用户授权。
- **凭证提供方 (CP)**: 专门的实体（如数字钱包），安全管理用户的支付凭证和支付方式。
- **商户端点 (ME)**: 代表商户运营的接口或智能体，用于展示产品和协商购物车。
- **商户支付处理端点 (MPP)**: 为支付网络构建最终交易授权消息的实体。
- **支付网络和发卡方**: 支付网络和向用户发放支付凭证的金融机构。

## 信任锚点：可验证数字凭证 (VDCs)

AP2 的核心创新是使用**可验证数字凭证 (VDCs)** 来构建信任机制。VDCs 是防篡改的、可移植的、加密签名的数字对象，作为交易的构建块。它们是智能体之间交换的信任语言。

主要有三种类型的 VDCs：

### 1. 购物车委托书（用户在场）

购物车委托书是用户在场授权购买时使用的基础凭证。它由商户生成，并由用户加密签名（通常通过其设备），将其身份和授权绑定到特定交易。

购物车委托书包含：

- 付款方和收款方的可验证身份。
- 特定支付方式的令牌化表示。
- 最终、准确的交易详情（产品、目的地、金额、货币）。
- 风险相关信号的容器。

<div class="grid cards">
    <figure markdown="span" class="card thumb">
        <a href="/assets/GMSCoreDPCScreen-legacy.png">
            <img src="/assets/GMSCoreDPCScreen-legacy.png" alt="Android 数字支付凭证界面"/>
        </a>
        <figcaption>Android 确认界面（当前版本）</figcaption>
    </figure>
    <figure markdown="span" class="card thumb">
        <a href="/assets/GMSCoreDPCScreen-future.png">
            <img src="/assets/GMSCoreDPCScreen-future.png" alt="Android 数字支付凭证界面（即将推出）"/>
        </a>
        <figcaption>Android 确认界面（即将推出）</figcaption>
    </figure>
</div>

### 2. 用户签名意图委托书（用户不在场）

用户签名意图委托书用于用户在交易时不在场的场景（例如"票一开售就买"）。它由购物智能体生成并由用户签名，授权智能体在定义的约束内行动。

用户签名意图委托书包含：

- 付款方和收款方的可验证身份。
- 授权支付方式的列表或类别。
- 购物意图，包括产品类别等参数和其他标准。
- 智能体对用户提示的自然语言理解。
- 到期时间（生存时间）。

### 3. 支付委托书

这是与支付网络和发卡方共享的独立 VDC。其目的是提供对交易智能体性质的可见性，帮助网络和发卡方建立信任并评估风险。它包含 AI 智能体存在和交易模式（用户在场 vs. 不在场）的信号。
